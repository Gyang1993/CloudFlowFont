{"remainingRequest":"C:\\Users\\Administrator\\WebstormProjects\\workviewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\WebstormProjects\\workviewer\\src\\utils\\api.js","dependencies":[{"path":"C:\\Users\\Administrator\\WebstormProjects\\workviewer\\src\\utils\\api.js","mtime":1640158287831},{"path":"C:\\Users\\Administrator\\WebstormProjects\\workviewer\\babel.config.js","mtime":1639559223901},{"path":"C:\\Users\\Administrator\\WebstormProjects\\workviewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639559218056},{"path":"C:\\Users\\Administrator\\WebstormProjects\\workviewer\\node_modules\\babel-loader\\lib\\index.js","mtime":1639559218905}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXInOyAvLyDor7fmsYLmi6bmiKrlmagKCmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8g5aaC5p6c5a2Y5ZyodG9rZW7vvIzor7fmsYLmkLrluKbov5nkuKp0b2tlbgogIGlmICh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5TdHInKSkgewogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0b2tlblN0cicpOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coZXJyb3IpOwp9KTsgLy8g5ZON5bqU5oum5oiq5ZmoCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChzdWNjZXNzKSB7CiAgLy8g5Lia5Yqh6YC76L6R6ZSZ6K+vCiAgLy8g5Yik5pat54q25oCB5piv5ZCm5q2j56GuIDIwMOihqOekuuaIkOWKn+iwg+eUqOWIsOS6huWQjuerr+aOpeWPo++8jOWIpOaWreaYr+WQpuiwg+eUqOWIsOaOpeWPowogIGlmIChzdWNjZXNzLnN0YXR1cyAmJiBzdWNjZXNzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAvLyDliKTmlq3kuJrliqHpgLvovpHvvIxkYXRh6KGo56S65ZCO56uv6L+U5Zue55qEanNvbuWvueixoe+8mmNvZGXlk43lupTnoIHjgIFtZXNzYWdl55u45bqU5L+h5oGv44CBb2JqZWN05pC65bim5LiA5Lqb5YW25LuW6ZyA6KaB5Lyg6YCS55qE5pWw5o2uCiAgICBpZiAoc3VjY2Vzcy5kYXRhLmNvZGUgPT09IDUwMCB8fCBzdWNjZXNzLmRhdGEuY29kZSA9PT0gNDAxIHx8IHN1Y2Nlc3MuZGF0YS5jb2RlID09PSA0MDMpIHsKICAgICAgTWVzc2FnZS5lcnJvcih7CiAgICAgICAgbWVzc2FnZTogc3VjY2Vzcy5kYXRhLm1lc3NhZ2UKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0gLy8g5YW25LuW55qE6YO96buY6K6k5Li66YCa6L+HCgoKICAgIGlmIChzdWNjZXNzLmRhdGEubWVzc2FnZSkgewogICAgICBNZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgIG1lc3NhZ2U6IHN1Y2Nlc3MuZGF0YS5tZXNzYWdlCiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHN1Y2Nlc3MuZGF0YTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8g5o6l5Y+j6K6/6Zeu5aSx6LSl77yM5ou/5LiN5YiwanNvbuWvueixoe+8jOaJgOS7peebtOaOpemAmui/h+WTjeW6lOeggeiOt+WPluWTjeW6lOeggWNvZGUKICBpZiAoZXJyb3IucmVzcG9uc2UuY29kZSA9PT0gNTA0IHx8IGVycm9yLnJlc3BvbnNlLmNvZGUgPT09IDQwNCkgewogICAgTWVzc2FnZS5lcnJvcih7CiAgICAgIG1lc3NhZ2U6ICfmnI3liqHlmajmlYXpmpzmiJbpobXpnaLmib7kuI3liLAnCiAgICB9KTsKICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlLmNvZGUgPT09IDQwMykgewogICAgTWVzc2FnZS5lcnJvcih7CiAgICAgIG1lc3NhZ2U6ICfmnYPpmZDkuI3otrPvvIzor7fogZTns7vnrqHnkIblkZgnCiAgICB9KTsKICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlLmNvZGUgPT09IDQwMSkgewogICAgTWVzc2FnZS5lcnJvcih7CiAgICAgIG1lc3NhZ2U6ICflsJrmnKrnmbvpmYbvvIzor7fnmbvlvZUnCiAgICB9KTsKICAgIHJvdXRlci5yZXBsYWNlKCcvJyk7CiAgfSBlbHNlIHsKICAgIC8vIOWmguaenOS4iui/sOaDheWGtemDveS4jeespuWQiO+8jOWImeaJk+WNsOebuOW6lOS/oeaBrwogICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkgewogICAgICBNZXNzYWdlLmVycm9yKHsKICAgICAgICBtZXNzYWdlOiBlcnJvci5yZXNwb25zZS5tZXNzYWdlCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgTWVzc2FnZS5lcnJvcih7CiAgICAgICAgbWVzc2FnZTogJ+acquefpemUmeivrycKICAgICAgfSk7CiAgICB9CiAgfQp9KTsgLy8g6K+35rGC5Zyw5Z2A5YmN572u6Lev5b6ECgp2YXIgYmFzZSA9ICcnOyAvLyDkvKDpgIFqc29u5qC85byP55qEcG9zdOivt+axggoKZXhwb3J0IHZhciBwb3N0UmVxdWVzdCA9IGZ1bmN0aW9uIHBvc3RSZXF1ZXN0KHVybCwgcGFyYW1zKSB7CiAgcmV0dXJuIGF4aW9zKHsKICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgdXJsOiAiIi5jb25jYXQoYmFzZSkuY29uY2F0KHVybCksCiAgICBkYXRhOiBwYXJhbXMKICB9KTsKfTsgLy8g5Lyg6YCBanNvbuagvOW8j+eahHB1dOivt+axggoKZXhwb3J0IHZhciBwdXRSZXF1ZXN0ID0gZnVuY3Rpb24gcHV0UmVxdWVzdCh1cmwsIHBhcmFtcykgewogIHJldHVybiBheGlvcyh7CiAgICBtZXRob2Q6ICdwdXQnLAogICAgdXJsOiAiIi5jb25jYXQoYmFzZSkuY29uY2F0KHVybCksCiAgICBkYXRhOiBwYXJhbXMKICB9KTsKfTsgLy8g5Lyg6YCBanNvbuagvOW8j+eahGdldOivt+axggoKZXhwb3J0IHZhciBnZXRSZXF1ZXN0ID0gZnVuY3Rpb24gZ2V0UmVxdWVzdCh1cmwsIHBhcmFtcykgewogIHJldHVybiBheGlvcyh7CiAgICBtZXRob2Q6ICdnZXQnLAogICAgdXJsOiAiIi5jb25jYXQoYmFzZSkuY29uY2F0KHVybCksCiAgICBkYXRhOiBwYXJhbXMKICB9KTsKfTsgLy8g5Lyg6YCBanNvbuagvOW8j+eahGRlbGV0Zeivt+axggoKZXhwb3J0IHZhciBkZWxldGVSZXF1ZXN0ID0gZnVuY3Rpb24gZGVsZXRlUmVxdWVzdCh1cmwsIHBhcmFtcykgewogIHJldHVybiBheGlvcyh7CiAgICBtZXRob2Q6ICdkZWxldGUnLAogICAgdXJsOiAiIi5jb25jYXQoYmFzZSkuY29uY2F0KHVybCksCiAgICBkYXRhOiBwYXJhbXMKICB9KTsKfTs="},{"version":3,"sources":["C:/Users/Administrator/WebstormProjects/workviewer/src/utils/api.js"],"names":["axios","Message","router","interceptors","request","use","config","window","sessionStorage","getItem","headers","error","console","log","response","success","status","data","code","message","replace","base","postRequest","url","params","method","putRequest","getRequest","deleteRequest"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport {Message} from 'element-ui';\r\nimport router from '../router'\r\n\r\n// 请求拦截器\r\naxios.interceptors.request.use(config=>{\r\n    // 如果存在token，请求携带这个token\r\n    if (window.sessionStorage.getItem('tokenStr')) {\r\n        config.headers['Authorization'] = window.sessionStorage.getItem('tokenStr');\r\n    }\r\n    return config;\r\n}, error =>{\r\n    console.log(error);\r\n})\r\n\r\n// 响应拦截器\r\naxios.interceptors.response.use(success => {\r\n    // 业务逻辑错误\r\n    // 判断状态是否正确 200表示成功调用到了后端接口，判断是否调用到接口\r\n    if (success.status && success.status === 200) {\r\n        // 判断业务逻辑，data表示后端返回的json对象：code响应码、message相应信息、object携带一些其他需要传递的数据\r\n        if (success.data.code === 500 || success.data.code === 401 || success.data.code === 403) {\r\n            Message.error({message: success.data.message});\r\n            return;\r\n        }\r\n        // 其他的都默认为通过\r\n        if (success.data.message) {\r\n            Message.success({message: success.data.message});\r\n        }\r\n    }\r\n    return success.data;\r\n}, error => {\r\n    // 接口访问失败，拿不到json对象，所以直接通过响应码获取响应码code\r\n    if (error.response.code === 504 || error.response.code === 404) {\r\n        Message.error({message: '服务器故障或页面找不到'});\r\n    } else if (error.response.code === 403) {\r\n        Message.error({message: '权限不足，请联系管理员'});\r\n    } else if (error.response.code === 401) {\r\n        Message.error({message: '尚未登陆，请登录'});\r\n        router.replace('/')\r\n    } else {\r\n        // 如果上述情况都不符合，则打印相应信息\r\n        if (error.response.data.message) {\r\n            Message.error({message: error.response.message});\r\n        } else {\r\n            Message.error({message: '未知错误'});\r\n        }\r\n    }\r\n});\r\n\r\n// 请求地址前置路径\r\nlet base = '';\r\n\r\n// 传送json格式的post请求\r\nexport const postRequest = (url, params) => {\r\n    return axios({\r\n        method: 'post',\r\n        url: `${base}${url}`,\r\n        data: params\r\n    })\r\n}\r\n\r\n// 传送json格式的put请求\r\nexport const putRequest = (url, params) => {\r\n    return axios({\r\n        method: 'put',\r\n        url: `${base}${url}`,\r\n        data: params\r\n    })\r\n}\r\n\r\n// 传送json格式的get请求\r\nexport const getRequest = (url, params) => {\r\n    return axios({\r\n        method: 'get',\r\n        url: `${base}${url}`,\r\n        data: params\r\n    })\r\n}\r\n\r\n// 传送json格式的delete请求\r\nexport const deleteRequest = (url, params) => {\r\n    return axios({\r\n        method: 'delete',\r\n        url: `${base}${url}`,\r\n        data: params\r\n    })\r\n}"]}]}